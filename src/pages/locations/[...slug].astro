---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import LocationPageLayout from '../../components/LocationPageLayout.astro';

export async function getStaticPaths() {
  const locations = await getCollection('locations');
  return locations.map((location) => ({
    params: { slug: location.slug },
    props: { location },
  }));
}

const { location } = Astro.props;
const { Content } = await location.render();
const data = location.data;
---

<BaseLayout 
  title={data.title} 
  description={data.description}
  keywords={data.keywords ? data.keywords.join(', ') : ''}
>
  <div class="container mx-auto px-4 py-8">
    <LocationPageLayout
      title={data.title}
      description={data.description}
      city={data.city}
      serviceAreas={data.service_areas || data.serviceArea}
    >
      <Content />
    </LocationPageLayout>
  </div>
</BaseLayout>