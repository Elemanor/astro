---
import Section from '../ui/Section.astro';
import Grid from '../ui/Grid.astro';
import { Wrench, Search, Shield, Hammer, Target, Shovel, CheckCircle } from 'lucide-react';

export interface ProcessStep {
  title: string;
  description: string;
  icon?: string;
}

export interface Props {
  steps: ProcessStep[];
  title?: string;
  subtitle?: string;
}

const defaultSteps: ProcessStep[] = [
  {
    title: "Free Inspection",
    description: "Our experts assess your property and identify issues",
    icon: "search"
  },
  {
    title: "Custom Solution",
    description: "We design a tailored solution for your specific needs",
    icon: "lightbulb"
  },
  {
    title: "Professional Installation",
    description: "Our certified team implements the solution efficiently",
    icon: "wrench"
  },
  {
    title: "Lifetime Warranty",
    description: "Enjoy peace of mind with our comprehensive warranty",
    icon: "shield"
  }
];

const {
  steps = defaultSteps,
  title = "Our Process",
  subtitle = "We follow a proven approach to ensure the best results"
} = Astro.props;

// Map icon names to components (expandable)
const iconMap = {
  wrench: Wrench,
  search: Search,
  shield: Shield,
  hammer: Hammer,
  target: Target,
  shovel: Shovel,
  check: CheckCircle,
  // Default icons for common names
  lightbulb: Target,
  water: Wrench,
  syringe: Wrench,
  brush: Hammer,
  pump: Wrench,
  checklist: CheckCircle,
  concrete: Hammer,
  pipe: Wrench,
  blueprint: Search,
  construction: Hammer,
  bricks: Hammer
};
---

<Section 
  title={title}
  subtitle={subtitle}
  background="muted"
  centered
>
  <Grid columns={steps.length > 3 ? 4 : steps.length}>
    {steps.map((step, index) => {
      const IconComponent = iconMap[step.icon] || Wrench;
      return (
        <div class="text-center space-y-4">
          <div class="relative">
            <div class="w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto">
              <IconComponent className="h-8 w-8 text-primary" client:load />
            </div>
            <span class="absolute -top-2 -right-2 w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center text-sm font-bold">
              {index + 1}
            </span>
          </div>
          <h3 class="text-lg font-semibold">{step.title}</h3>
          <p class="text-muted-foreground text-sm">{step.description}</p>
        </div>
      );
    })}
  </Grid>
</Section>